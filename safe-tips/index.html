<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Safe Tips - Tipoff: Football Multiples/Parlays Betting Tips"
    />
    <meta
      name="keywords"
      content="Tipoff, legal, football, soccer, prediction, tips, safe tips, betting"
    />
    <meta name="author" content="IAmMasterCraft" />
    <link rel="icon" href="../src/img/favicon.ico" sizes="any" />
    <link rel="apple-touch-icon" href="../src/img/apple-touch-icon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Merienda:wght@300..900&display=swap"
      rel="stylesheet"
    />
    <link rel="manifest" href="../manifest.json" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
      crossorigin="anonymous"
    />

    <title>Safe Tips - Tipoff</title>

    <style>
      body {
        font-family: "Merienda", cursive;
        background: rgb(1, 153, 51);
        background: linear-gradient(
          150deg,
          rgba(1, 153, 51, 1) 0%,
          rgba(77, 172, 78, 1) 21%,
          rgba(0, 212, 255, 1) 52%
        );
        background-size: 400% 400%;
        animation: gradient 60s ease infinite;
      }

      @keyframes gradient {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .safe-tips-header {
            background-color: #000;
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }

        .accordion-button {
            font-weight: bold;
            background-color: #001507;
            color: white;
        }

        .accordion-button:not(.collapsed) {
            background-color: #fff;
            color: #001507;
        }

        .total-odds {
            font-weight: bold;
        }

        table {
            width: 100%;
        }

        th, td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #019933;
            color: white;
        }

        tr {
            border-bottom: 1px solid #019933;
        }

        td {
            background-color: rgba(255, 255, 255, 0.9);
        }

        footer {
            background-color: black;
            color: white;
        }

        footer a {
            text-decoration: none;
            color: white;
        }
    </style>
  </head>

  <body class="bg-light">
    <main class="container mb-5">
        <!-- Safe Tips Header -->
        <div class="safe-tips-header my-5">
            <h1>Safe Tips</h1>
            <p class="lead">Discover reliable football accumulator predictions and betting tips with a high probability of success.</p>

            <!-- Breadcrumb Navigation -->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb justify-content-center">
                    <li class="breadcrumb-item"><a href="index.html" class="text-success text-decoration-none">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Safe Tips</li>
                </ol>
            </nav>
        </div>

        <!-- Safe Tips Content -->
        <div class="accordion" id="parlayAccordion">

            <div class="accordion-item">
                <h2 class="accordion-header" id="tips16966868499999999">
                    <button class="accordion-button text-success" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16966868499999999" aria-expanded="true" aria-controls="collapse16966868499999999">
                        Betting Slip for Today
                    </button>
                </h2>
                <div id="collapse16966868499999999" class="accordion-collapse  " aria-labelledby="tips16966868499999999" data-bs-parent="#parlayAccordion">
                    <div class="accordion-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Match</th>
                                    <th>Pick</th>
                                    <th>Odds</th>
                                </tr>
                            </thead>
                            <tbody id="fixtureList">
                                <!-- <tr class="text-success">
                                    <td>SV Darmstadt 98 vs Cologne</td>
                                    <td>Over 0.5 Goals</td>
                                    <td>1.02</td>
                                </tr> -->
                            </tbody>
                        </table>
                        <!-- <p class="text-danger">Total Odds: 2.01</p> -->
                    </div>
                </div>
            </div>

    </main>

    <footer class="text-muted py-5" style="background-color: black">
      <div class="container text-white">
        <p class="text-center">
          <a href="../privacy">Privacy</a> &nbsp;||&nbsp;
          <a href="../faq">FAQ</a> &nbsp;||&nbsp;
          <a href="../notice">Notice Board</a> &nbsp;||&nbsp;
          <a href="../terms">Terms of Use</a>
        </p>
        <br />
        <hr />
        <br />
        <p class="text-center">
          <a
            href="https://github.com/IAmMasterCraft"
            class="text-decoration-none"
            >Created with ❤️ by Tipoff Dev</a
          >
        </p>
      </div>
    </footer>

    <!-- Modal for Disclaimer -->
    <div class="modal fade" id="disclaimerModal" tabindex="-1" aria-labelledby="disclaimerModalLabel" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title" id="disclaimerModalLabel">Disclaimer</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <p>While these tips are termed "Safe Tips," I want to remind you that external factors beyond statistical analysis, like injuries, weather, or referee decisions, can influence the outcome of a match. Betting can be risky, bet responsibly and DYOR.</p>
                  <p><strong>Please bet responsibly and never bet more than you can afford to lose.</strong></p>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Agree</button>
              </div>
          </div>
      </div>
  </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        try {
          // get platform params
          const urlParams = new URLSearchParams(window.location.search);
          const platform = urlParams.get("platform");
          if (platform.toLowerCase() === "mobile") {
            // hide paragraphs in the footer
            document.querySelectorAll("footer p").forEach((p) => {
              p.style.display = "none";
            });
          }
        } catch (error) {
          console.error(error);
        }
      });
    </script>
    <script>
      // Show the modal as soon as the page loads
      window.addEventListener('load', function() {
          const disclaimerModal = new bootstrap.Modal(document.getElementById('disclaimerModal'));
          disclaimerModal.show();
      });
  </script>
  <script>
    var MARKET_LIST = {
        "1": "Home to win",
        "X": "Both Teams to Draw",
        "2": "Away to win",
        "1X": "Double Chance - Home or Draw",
        "12": "Double Chance - Home or Away",
        "X2": "Double Chance - Draw or Away",
        "O05": "Total Goals Over 0.5",
        "O15": "Total Goals Over 1.5",
        "O25": "Total Goals Over 2.5",
        "O35": "Total Goals Over 3.5",
        "O45": "Total Goals Over 4.5",
        "O55": "Total Goals Over 5.5",
        "U05": "Total Goals Under 0.5",
        "U15": "Total Goals Under 1.5",
        "U25": "Total Goals Under 2.5",
        "U35": "Total Goals Under 3.5",
        "U45": "Total Goals Under 4.5",
        "U55": "Total Goals Under 5.5",
    };
    async function fetchFixtures(startDate, endDate) {
        // Construct the API URL with the provided dates
        const apiUrl = `https://api.betmines.com/betmines/v1/fixtures/web?dateFormat=extended&platform=website&from=${startDate}&to=${endDate}`;

        try {
            // Make the API request
            const response = await fetch(apiUrl, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            // Check if the response is successful
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            // Parse the response JSON
            const data = await response.json();

            // Return the data for further processing
            return data;
        } catch (error) {
            console.error('Error fetching fixtures:', error);
            return null;
        }
    }

    function pickWinningTips(matches) {
        // Sort matches by bestOddProbability in descending order
        const sortedMatches = matches
            .filter(match => match.bestOddProbability) // Ensure the match has bestOddProbability
            .sort((a, b) => b.bestOddProbability - a.bestOddProbability);
        
        // Select the top 5 matches
        const top5Matches = sortedMatches.slice(0, 5);
        
        // Extract relevant details for the winning tips
        return top5Matches.map(match => ({
            matchId: match.id,
            league: match.league.name,
            localTeam: match.localTeam.name,
            visitorTeam: match.visitorTeam.name,
            bestOddProbability: match.bestOddProbability,
            prediction: match.prediction,
            predictionOddValue: match.predictionOddValue
        }));
    }

    // Example: Using the function with dynamic dates
    const today = new Date().toISOString().split('T')[0]; // Current date in YYYY-MM-DD format
    const tomorrow = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString().split('T')[0];
    // const today = '2024-12-22';
    // const tomorrow = '2024-12-23';
    fetchFixtures(`${today}T00:00:00Z`, `${tomorrow}T00:00:00Z`)
    .then(data => {
        if (data) {
            console.log('Fetched Fixtures:', data);
            const fixtureList = document.getElementById('fixtureList');
            const matchTips = pickWinningTips(data);
            for (const match of matchTips) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        ${match.localTeam} vs ${match.visitorTeam}
                        <br>
                        <small class="text-muted">${match.league}</small>
                    </td>
                    <td>${MARKET_LIST[match.prediction]}</td>
                    <td>${match.predictionOddValue}</td>
                `;
                fixtureList.appendChild(row);
            }
        }
    });
  </script>
  </body>
</html>
